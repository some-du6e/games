
var map = {
    title: "Snake",
    song: "env2",
    maker: "dododo73",
    spawn: [0, 0.5, 0],
    init: function() {

		function pup(a2, b, c, d, e, f, g, h, i, j) {
			a.og(a2,b,c,d,e,f,g,h,i,j);
		}

		a.og('ice2', 0,0,0,0,0,0,3 ,0.3 ,6 );
		a.og('ice2', 0.605,0,-5.953,0,0,0,3 ,0.3 ,6 );
		a.og('ice2', 0.605,0.441,-11.867,0,10.335,0,3 ,0.3 ,6 );
		a.og('ice2', 3.181,1.513,-17.742,0,10.335,0,3 ,0.3 ,6 );
		a.og('ice2', 0.616,2.579,-23.589,0,10.335,0,3 ,0.3 ,6 );

		a.og('green', 0.616,3.623,-29.314,0,-10.947,0,3 ,0.3 ,6 );
		a.og('green', -1.519,2.485,-35.196,0,-10.947,0,3 ,0.3 ,6 );

		a.og('ice2', -1.908,1.591,-40.386,0,10.335,0,3 ,0.3 ,6 );
		a.og('ice2', 0.717,2.665,-46.275,0,10.335,0,3 ,0.3 ,6 );

		a.og_y(0.657,2.861,-54.075,0,-83.838,0,2 ,10 );
		a.og_y(0.657,1.74,-63.232,0,-108.362,0,2 ,10 );
		a.og('ice2', 0.717,1.025,-69.101,0,0,0,3 ,0.3 ,8.504 );
		a.og('ice2', 2.523,1.025,-76.126,0,0,0,3 ,0.3 ,6 );
		a.og('ice2', 0.392,1.025,-81.934,0,0,0,3 ,0.3 ,6 );
		a.og_y(0.657,0.583,-84.634,0,-83.838,0,2 ,10 );
		a.og_y(3.155,1.419,-93.542,0,-83.838,31.382,2 ,10 );
		a.og_y(3.82,2.312,-102.03,0,-83.838,-20.805,2 ,10 );

		a.og_y(2.262,2.999,-107.02,0,-90,90,2 ,10 );
		a.og_y(2.262,2.999,-108.066,0,-90,90,2 ,10 );
		a.og_y(2.262,2.999,-110.311,0,-90,90,2 ,10 );
		a.og_y(2.262,2.999,-109.265,0,-90,90,2 ,10 );

		a.og('ice2', 2.147,3.349,-113.497,0,0,0,3 ,0.3 ,6 );
		a.og('ice2', 3.452,3.349,-119.432,0,0,0,3 ,0.3 ,6 );
		a.og('ice2', 3.452,3.732,-125.229,0,9.363,0,3 ,0.3 ,6 );
		a.og('ice2', 3.452,4.685,-131.007,0,9.363,0,1.007 ,0.3 ,6 );
		a.og('fire', 3.452,5.648,-136.845,0,9.363,0,3 ,0.3 ,6 );
		a.og('fire', 3.452,5.555,-142.679,0,-9.254,0,3 ,0.3 ,6 );
		a.og('fire', 3.452,4.507,-148.465,0,0,0,3 ,1.3 ,6 );
		a.og('fire', 3.452,4.804,-154.285,0,7.289,0,3 ,1.3 ,6 );
		a.og('fire', 3.452,8.095,-165.31,0,25.411,0,3 ,1.3 ,6 );
		a.og('fire', 3.452,6.003,-159.871,0,18.122,0,3 ,1.3 ,6 );


		a.og('ice2', 3.452,4.507,-213.522,0,0,0,14.375 ,1.3 ,21.921 );
		a.og('ice2', 3.452,6.168,-233.098,0,16.796,0,3 ,1.3 ,6 );
		a.og('ice2', 3.452,4.914,-227.408,0,9.507,0,3 ,1.3 ,6 );
		a.og('green', 3.452,8,-237.912,0,27.02,0,17.67 ,1.3 ,4.566 );
		a.og('green', -24.965,8,-308.187,0,27.02,0,17.67 ,1.3 ,4.566 );
		a.og('ice2', -24.965,4.914,-297.683,0,9.507,0,3 ,1.3 ,6 );
		a.og('ice2', -24.965,6.168,-303.373,0,16.796,0,3 ,1.3 ,6 );
		a.og('ice2', -24.965,4.507,-283.797,0,0,0,14.375 ,1.3 ,21.921 );

		a.og('ice2', 2.828,4.507,-356.434,33.319,0,0,5.18 ,1.3 ,21.921 );
		a.og('ice2', 13.582,6.168,-372.792,33.319,16.796,0,3 ,1.3 ,6 );
		a.og('ice2', 10.456,4.914,-368.037,33.319,9.507,0,3 ,1.3 ,6 );
		a.og('green', 16.226,8,-376.815,33.319,27.02,0,17.67 ,1.3 ,4.566 );
		a.og('green', 24.496,8,-447.411,2.357,27.02,0,17.67 ,1.3 ,4.566 );
		a.og('ice2', 24.064,4.914,-436.915,2.357,9.507,0,3 ,1.3 ,6 );
		a.og('ice2', 24.298,6.168,-442.601,2.357,16.796,0,3 ,1.3 ,6 );
		a.og('ice2', 23.492,4.507,-423.041,2.357,0,0,5.18 ,1.3 ,21.921 );


		a.og('ice2', 26.771,4.507,-502.673,2.357,0,0,23.311 ,1.3 ,41.709 );
		a.og('ice2', 28.072,4.507,-534.278,2.357,0,0,6.88 ,1.3 ,23.402 );



		a.og_end(-26.771, 4.507, -536.278, 0);


		this.setgrav = function(box, scene, x, y, z) {
			scene.gravity = new BABYLON.Vector3(x, y, z);
			scene.getPhysicsEngine().setGravity(new BABYLON.Vector3(x, y, z));
			box.applyGravity = true;
		}
		map.per = 0;

	},
	post: function() {
		cc.set_monkey("speed", 0.2);
		cc.set_monkey("steer", 0.03);
		cc.refresh();
	},
    section_id: 0,
    section_update: function() {
    },
    reset: function() {
        this.section_id = 0;
		cleanup.run(false);
		this.init();
    },
    physics_update: function() {},
    render_update: function() {
    	iv(player, scene);
    }
}

function iv(box, scene) {
	//map.setgrav(scene, 0, 0, 0);
	if ((box.position.z < -26) && (box.position.z > -28)) {
		if (map.per == 0) {
			map.setgrav(box, scene, 0, 2, 0); //9.81
			map.per = 1;
		}
	}
	if ((box.position.z < -37) && (box.position.z > -38)) {
		if (map.per == 1) {
			map.setgrav(box, scene, 0, -9.81, 0); //9.81
			map.per = 2;
		}
	}
	if ((box.position.z < -148) && (box.position.z > -150)) {
		speed = 0.5 * 1.1;
		if (map.per == 2) {
			map.setgrav(box, scene, 0, -2, 0); //9.81
			map.per = 3;
		}
	}
	if ((box.position.z < -534)) {
		speed = 0.5 * 0.4;
	}

}


