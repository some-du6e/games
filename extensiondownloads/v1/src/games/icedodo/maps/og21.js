var map = {
    title: "Zigzag",
    song: "env2",
    maker: "dododo73",
    spawn: [0, 0.5, 0],
    init: function() {

		function pup(a2, b, c, d, e, f, g, h, i, j) {
			a.og(a2,b,c,d,e,f,g,h,i,j);
		}
		a.og('ice', 0,0,0,0,0,0,7.288 ,0.1 ,4.826 );
		a.og('ice', 0,0,-3.363,0,0,0,1.19 ,0.1 ,4.826 );		
		a.og('ice', -0.568,0,-19.257,0,0,0,1.19 ,0.1 ,27.368 );
		a.og('ice', 2.169,0,-39.078,23.475,0,0,1.19 ,0.1 ,19.629 );
		a.og('ice', 3.498,0,-55.19,-17.82,0,0,1.19 ,0.1 ,19.629 );
		a.og('ice', 1.298,0,-67.398,0,0,0,2.76 ,0.1 ,6.051 );
		a.og('ice', 0.036,0,-72.102,-9.509,0,0,1.02 ,0.1 ,6.051 );
		a.og('ice', 2.891,0,-72.283,16.887,0,0,1.02 ,0.1 ,6.051 );
		a.og('ice', 3.714,0,-77.682,0,0,0,1.02 ,0.1 ,6.051 );
		a.og('ice', -0.389,0,-77.682,0,0,0,1.02 ,0.1 ,6.051 );
		a.og('ice', -0.361,0,-82.617,0,0,0,2 ,0.1 ,4 ); //10
		a.og('ice', 3.757,0,-85.127,0,0,0,2 ,0.1 ,8.917 );
		a.og('ice', 1.593,0,-85.905,27.556,0,0,0.825 ,0.1 ,7.108 );
		a.og('ice', 3.757,0,-92.86,0,0,0,0.873 ,0.1 ,6.816 );
		a.og('ice', 4.292,0,-97.21,21.569,0,0,0.873 ,0.1 ,2.928 );
		a.og('ice', 5.506,0,-99.397,33.291,0,0,0.873 ,0.1 ,2.928 );
		a.og('ice', 6.604,0,-101.069,33.291,0,0,4.422 ,0.1 ,1.587 );
		a.og('ice', 6.386,0,-103.329,0,0,0,2 ,0.1 ,4 );
		a.og('ice', 7.698,0,-106.814,0,0,0,2 ,0.1 ,4 );
		a.og('ice', 7.698,0.266,-110.359,0,8.055,0,2 ,0.1 ,4 );
		a.og('ice', 8.084,0.743,-113.729,0,8.055,0,0.872 ,0.1 ,4 ); //20
		a.og('ice', 7.519,1.04,-115.833,0,8.055,0,0.872 ,0.1 ,2.515 );
		a.og('ice', 7.519,1.198,-118.29,0,0,0,0.872 ,0.1 ,2.515 );
		a.og('ice', 7.519,1.198,-120.356,0,0,0,2 ,0.1 ,4 );
		a.og('fire', 9.847,1.198,-122.979,0,0,0,2 ,0.1 ,1.378 ); //24
		a.og('fire', 11.625,1.198,-124.168,0,0,0,2 ,0.1 ,1.378 ); //25
		a.og('fire', 13.341,1.198,-125.308,0,0,0,2 ,0.1 ,1.378 ); //26
		a.og('fire', 15.022,1.198,-126.534,0,0,0,2 ,0.1 ,1.378 ); //27
		a.og('ice', 8.645,1.198,-128.573,0,0,0,2 ,0.1 ,2.807 );
		a.og('ice', 7.025,1.198,-130.769,0,0,0,2 ,0.1 ,2.807 );
		a.og('ice', 5.717,1.198,-135.385,-11.015,0,0,0.859 ,0.1 ,9.669 ); //30
		a.og('ice', 3.611,1.198,-140.192,-67.914,0,0,0.859 ,0.1 ,2.865 );
		a.og('ice', 2.38,1.198,-141.82,0,0,0,0.859 ,0.1 ,2.865 );
		a.og('ice', 2.38,1.198,-145.085,0,0,0,2 ,0.1 ,4 );
		a.og('ice', 2.38,1.198,-149.022,0,0,0,0.945 ,0.1 ,4 );
		a.og('brown', 3.113,0.884,-151.409,0,0,0,0.945 ,0.1 ,4 );
		a.og('brown', 3.383,0.884,-154.956,0,0,0,1.506 ,0.1 ,4 );
		a.og('brown', 2.311,0.884,-158.572,0,0,0,1.506 ,0.1 ,4 );
		a.og('brown', 2.311,0.884,-163.687,0,0,0,5.355 ,0.1 ,6.619 );
		a.og('brown', 5.019,0.884,-169.863,0,0,0,1.701 ,0.1 ,6.619 );
		a.og('brown', 6.497,0.884,-175.685,28.029,0,0,1.701 ,0.1 ,6.619 ); //40
		a.og('brown', 10.394,0.884,-180.674,46.791,0,0,1.701 ,0.1 ,6.619 );
		a.og('brown', 15.605,0.884,-183.622,73.001,0,0,1.701 ,0.1 ,6.619 );
		a.og('brown', 19.823,0.884,-183.487,97.207,0,0,1.701 ,0.1 ,3.374 );
		a.og('brown', 22.833,0.884,-182.313,118.447,0,0,1.701 ,0.1 ,3.374 );
		a.og('brown', 24.56,0.884,-179.953,162.819,0,0,2.701 ,0.1 ,3.374 );
		a.og('brown', 26.221,0.884,-177.738,134.11,0,0,2.701 ,0.1 ,3.374 );
		a.og('brown', 28.837,0.884,-175.321,134.11,0,0,2 ,0.1 ,4 );
		a.og('brown', 1.968,0.884,-169.863,0,0,0,1.701 ,0.1 ,6.619 );
		a.og('brown', 2.88,0.884,-176.25,15.07,0,0,1.701 ,0.1 ,6.619 );
		a.og('brown', 4.48,1.344,-182.194,15.07,8.928,0,1.701 ,0.1 ,6.619 ); //50
		a.og('brown', 5.224,1.805,-188.627,0,0,0,1.701 ,0.1 ,6.619 );
		a.og('brown', 5.673,1.148,-187.364,0,0,0,1.701 ,0.1 ,3.164 );
		a.og('brown', 6.325,1.148,-189.776,30.435,0,0,1.701 ,0.1 ,3.164 );
		a.og('brown', 8.489,1.148,-192.798,30.435,0,0,2.401 ,0.1 ,4.864 );
		a.og('brown', 9.386,1.148,-196.598,30.435,0,0,1.701 ,0.1 ,4.864 );
		a.og('brown', 12.694,1.148,-199.729,58.682,0,0,1.701 ,0.1 ,4.864 );
		a.og('brown', 16.696,1.148,-200.624,96.757,0,0,1.701 ,0.1 ,4.864 );
		a.og('brown', 21.301,1.148,-199.546,108.6,0,0,1.701 ,0.1 ,4.864 );
		a.og('brown', 25.193,1.148,-197.253,131.321,0,0,1.701 ,0.1 ,4.864 );
		a.og('brown', 27.433,1.148,-193.688,160.059,0,0,1.701 ,0.1 ,4.864 ); //60
		a.og('brown', 28.218,1.148,-189.534,0,0,0,1.701 ,0.1 ,4.275 );
		a.og('brown', 27.718,1.148,-186.765,27.58,0,0,1.701 ,0.1 ,2.248 );
		a.og('brown', 25.494,1.148,-183.908,41.546,0,0,1.701 ,0.1 ,5.419 );
		a.og('brown', 21.123,1.148,-179.533,52.083,0,0,1.701 ,0.1 ,7.724 );
		a.og('brown', 18.879,1.148,-172.469,8.702,0,0,8.326 ,0.1 ,9.883 );
		a.og('brown', 25.578,1.148,-166.412,8.702,0,0,8.326 ,0.1 ,9.883 );
		a.og('brown', 32.137,0.884,-172.568,125.771,0,0,1.252 ,0.1 ,5.216 );
		a.og('brown', 20.751,1.148,-166.536,-36.499,0,0,2.898 ,0.1 ,4.088 );
		a.og('brown', 33.11,1.148,-165.419,0,0,0,8.326 ,0.1 ,2.229 );
		a.og('brown', 36.194,0.884,-169.645,125.771,0,0,1.252 ,0.1 ,5.216 ); //70
		a.og('brown', 40.134,0.884,-167.611,108.306,0,0,1.252 ,0.1 ,5.216 );
		a.og('brown', 39.371,0.884,-165.789,78.594,0,0,2.531 ,0.1 ,5.216 );
		a.og('brown', 43.386,0.884,-166.193,96.705,0,0,2.724 ,0.1 ,5.216 );
		a.og('brown', 48.35,0.884,-165.61,96.705,0,0,0.818 ,0.1 ,5.216 );
		a.og('brown', 52.559,0.884,-166.02,73.966,0,0,0.818 ,0.1 ,5.216 );
		a.og('brown', 56.929,0.884,-168.427,53.068,0,0,0.818 ,0.1 ,5.216 );
		a.og('brown', 59.317,0.884,-171.058,35.327,0,0,0.818 ,0.1 ,5.216 );
		a.og('brown', 60.734,0.884,-174.401,11.803,0,0,0.818 ,0.1 ,3.679 );
		a.og('fire', 61.121,0.85,-181.374,0,0,0,1.453 ,0.1 ,11.841 );
		a.og('fire', 60,0.85,-191.02,0,0,0,1.453 ,0.1 ,11.841 ); //80
		a.og('fire', 60.989,0.85,-201.896,0,0,0,1.453 ,0.1 ,12.773 );
		a.og('ice', 60.989,0.82,-211.282,0,0,0,2.24 ,0.1 ,7.033 );
		a.og('ice', 59.873,0.82,-218.069,0,0,0,2.24 ,0.1 ,7.033 );
		a.og('ice', 61.331,0.82,-223.316,0,0,0,2.24 ,0.1 ,7.033 );
		a.og('ice', 56.614,0.82,-232.447,0,0,0,2.24 ,0.1 ,9.465 );
		a.og('ice', 58.929,0.82,-226.988,-31.472,0,0,1.018 ,0.1 ,8.013 );
		a.og('ice', 58.218,0.82,-238.926,21.762,0,0,0.955 ,0.1 ,6.253 );
		a.og('ice', 59.054,0.82,-242.781,0,0,0,2.24 ,0.1 ,3.003 );
		a.og('ice', 59.054,0.82,-245.703,0,0,0,0.736 ,0.1 ,3 );
		a.og('ice', 59.054,0.82,-248.662,0,0,0,2 ,0.1 ,3 ); //90
		a.og('ice', 59.054,0.82,-251.573,0,0,0,2 ,0.1 ,3 ); //91
		a.og('ice', 59.054,0.82,-254.523,0,0,0,2 ,0.1 ,3 ); //92
		a.og('ice', 59.054,0.82,-257.463,0,0,0,2 ,0.1 ,3 ); //93
		a.og('ice', 59.054,0.82,-259.495,0,0,0,2 ,0.1 ,1.163 ); 
		a.og('ice', 59.054,0.938,-261.575,0,4.839,0,2 ,0.1 ,3.264 );
		a.og('ice', 59.603,1.163,-264.232,0,4.839,0,0.795 ,0.1 ,3.264 );
		a.og('ice', 59.047,1.415,-267.211,-19.957,4.55,-1.65,0.795 ,0.1 ,3.264 );
		a.og('ice', 59.054,1.653,-270.019,0,4.839,0,2 ,0.1 ,3.264 );
		a.og('ice', 59.054,1.76,-273.207,0,0,0,2 ,0.1 ,3.264 );
		a.og('ice', 60.166,1.76,-275.563,0,0,0,1.436 ,0.1 ,3.264 );
		a.og('ice', 60.166,1.76,-279.05,0,0,0,0.535 ,0.1 ,4.392 );
		a.og('ice', 60.166,1.76,-282.778,0,0,0,1.436 ,0.1 ,3.264 );
		a.og('ice', 59.559,1.76,-285.494,-23.189,0,0,1.436 ,0.1 ,3.264 );
		a.og('ice', 59.032,1.76,-288.232,0,0,0,1.436 ,0.1 ,3.264 ); // ENDNG

		a.og_end(-59, 1.86, -288, 0);
	},
	post: function() {
		cc.set_monkey("speed", 0.2);
		cc.set_monkey("steer", 0.03);
		cc.refresh();
	},
    section_id: 0,
    section_update: function() {
    },
    reset: function() {
        this.section_id = 0;
		cleanup.run(false);
		this.init();
    },
    physics_update: function() {},
    render_update: function() {
    	iv(player, scene);
    }
}

function iv(box, scene) {
	if ((box.position.z < -138) && (box.position.z > -142)) {
		speed = 0.5 * 0.2;
		steer = 0.5 * 0.09;
	} else if ((box.position.z < -9) && (box.position.z > -70)) {
		speed = 0.5 * 0.7;
		steer = 0.5 * 0.01;
	} else if ((box.position.z < -180) && (box.position.z > -210) && (box.position.x < -58)) {
		speed = 0.5 * 0.7;
		steer = 0.5 * 0.02;
	} else {
		if (box.position.z < -1) {
			speed = 0.5 * 0.4;
			steer = 0.5 * 0.05;
		}
	}


	if ((box.position.z < -31) && (box.position.z > -33.5)) {
		rotation += 0.5 * 0.1;
	}

	if ((box.position.z < -46.5) && (box.position.z > -50.5)) {
		rotation -= 0.5 *  0.1;
	}

	if ((box.position.z < -65) && (box.position.z > -67)) {
		rotation += 0.5 * 0.1;
	}

	if (box.position.z < -246) {
		scene.getMeshByName("P90").position.x += 0.5 * 0.1;
	}
	if (box.position.z < -250) {
		scene.getMeshByName("P91").position.x -= 0.5 *  0.1;
	}
	if (box.position.z < -254) {
		scene.getMeshByName("P92").position.x += 0.5 * 0.1;
	}
	if (box.position.z < -258) {
		scene.getMeshByName("P93").position.x -= 0.5 *  0.1;
	}

	if ((box.position.z < -115) && (box.position.z > -200)) {
		scene.getMeshByName("P24").position.x += 0.5 * 0.1;
		scene.getMeshByName("P25").position.x += 0.5 * 0.15;
		scene.getMeshByName("P26").position.x += 0.5 * 0.20;
		scene.getMeshByName("P27").position.x += 0.5 * 0.25;

	}
}

