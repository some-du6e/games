var map = {
    title: "Cake",
    song: "env2",
    maker: "dododo73",
    spawn: [0, 0.5, 0],
    init: function() {

	function pup(a2, b, c, d, e, f, g, h, i, j) {
		a.og(a2,b,c,d,e,f,g,h,i,j);
	}
	a.og('ice', 0,0,0,0,0,0,2 ,0.1 ,4 );
	a.og('ice', 0,0.188,-4.108,0,4.512,0,2 ,0.1 ,4 );
	a.og('ice', 0,0.794,-11.783,0,4.512,0,0.423 ,0.1 ,15.711 );
	a.og('ice', 1.203,1.104,-15.717,16.932,4.317,1.313,0.423 ,0.1 ,15.711 );
	a.og('ice', 2.787,1.592,-21.895,0,4.512,0,0.423 ,0.1 ,15.711 );
	a.og('ice', 1.723,2.072,-27.98,-12.642,4.403,-0.986,0.423 ,0.1 ,10.252 );
	a.og('ice', -0.371,2.504,-33.462,0,4.512,0,2.746 ,0.1 ,8.701 );
	a.og('fire', 0.936,2.965,-33.426,0,4.512,0,1.033 ,0.971 ,0.757 );
	a.og('fire', -1.652,3.219,-36.651,0,4.512,0,1.433 ,0.971 ,0.757 );
	a.og('ice', 0.762,3.003,-39.78,-25.595,4.071,-1.947,2.746 ,0.1 ,8.701 );
	a.og('fire', 1.737,3.487,-40.045,-25.595,4.071,-1.947,1.033 ,0.971 ,0.757 );
	a.og('fire', -1.793,3.617,-41.695,-25.595,4.071,-1.947,1.033 ,0.971 ,0.757 );
	a.og('ice', -0.597,3.426,-45.135,-25.595,4.071,-1.947,2.746 ,0.1 ,8.701 );
	a.og('fire', -2.415,3.917,-45.491,-25.595,4.071,-1.947,1.633 ,0.971 ,0.757 );
	a.og('fire', 0.505,4.026,-46.881,-25.595,4.071,-1.947,1.633 ,0.971 ,0.757 );
	a.og('ice', -2.738,4.035,-52.858,-5.961,4.487,-0.468,2.746 ,0.1 ,8.701 );
	a.og('fire', -1.629,4.378,-51.335,-5.961,4.071,-1.947,1.633 ,0.971 ,0.757 );
	a.og('fire', -4.176,4.576,-54.917,-5.961,4.071,-1.947,1.633 ,0.971 ,0.757 );
	a.og('ice', -1.062,4.591,-59.907,32.214,3.819,2.403,2.746 ,0.1 ,8.701 );
	a.og('fire', -3.177,4.941,-59.469,32.214,3.819,-1.947,1.633 ,0.971 ,0.757 );
	a.og('ice', 3.348,4.501,-67.661,31.86,-4.618,2.406,2.746 ,0.1 ,9.357 );
	a.og('fire', 3.539,3.939,-68.011,33.215,25.817,2.664,2.746 ,1.877 ,1.865 );
	a.og('ice', 5.704,4.426,-71.689,31.86,0,0,2.936 ,0.1 ,9.357 );
	a.og('fire', 9.505,3.356,-77.806,31.86,0,0,2.2 ,0.1 ,8.876 );
	a.og('fire', 10.542,3.356,-83.35,6.942,0,0,2.2 ,0.1 ,8.876 );
	a.og('fire', 13.609,3.356,-81.445,52.703,0,0,2.2 ,0.1 ,8.876 );
	a.og('fire', 20.231,3.356,-86.489,52.703,0,0,2.2 ,0.1 ,8.876 );
	a.og('fire', 11.509,3.356,-91.291,6.942,0,0,2.2 ,0.1 ,8.876 );
	a.og('fire', 14.019,3.356,-95.382,6.942,0,0,2.2 ,0.1 ,8.876 );
	a.og('fire', 22.399,3.356,-90.34,52.703,0,0,2.2 ,0.1 ,8.876 );
	a.og('fire', 21.68,3.356,-99.105,27.912,0,0,11.083 ,0.1 ,8.876 ); // floo30
	a.og('ice', 22.973,2.356,-112.093,0,0,0,6.43 ,0.1 ,27.577 );
	a.og('fire', 22.973,1.000,-109.934,0,0,0,6.43 ,0.1 ,0.593 ); // scre
	a.og('fire', 22.973,-0.5,-121.935,0,0,0,9.43 ,0.6 ,3.209 ); // sin
	a.og('fire', 22.973,-0.5,-123.935,0,0,0,9.43 ,0.6 ,3.209 ); // spi 2
	a.og('fire', 22.973,-0.5,-125.935,0,0,0,9.43 ,0.6 ,3.209 ); // spi 3
	a.og('ice', 22.973,2.356,-136.803,0,0,0,6.43 ,0.1 ,27.577 );
	a.og('fire', 19.973,2.52,-136.803,0,0,0,1 ,0.5 ,1 ); // P37
	a.og('fire', 22.973,2.52,-140.803,0,0,0,1 ,0.5 ,1 );
	a.og('fire', 25.973,2.52,-142.803,0,0,0,1 ,0.5 ,1 );
	a.og('fire', 17.973,2.52,-146.803,0,0,0,1 ,0.5 ,1 ); // P40
	a.og('fire', 20.973,2.52,-150.803,0,0,0,1 ,0.5 ,1 );
	a.og('fire', 23.973,2.52,-152.803,0,0,0,1 ,0.5 ,1 );
	a.og('fire', 22.973,2.52,-136.803,0,0,0,1 ,0.5 ,1 ); // P43
	a.og('fire', 25.973,2.52,-140.803,0,0,0,1 ,0.5 ,1 );
	a.og('fire', 28.973,2.52,-142.803,0,0,0,1 ,0.5 ,1 );
	a.og('fire', 17.973,2.52,-140.803,0,0,0,1 ,0.5 ,1 ); // P46
	a.og('fire', 20.973,2.52,-146.803,0,0,0,1 ,0.5 ,1 );
	a.og('fire', 23.973,2.52,-152.803,0,0,0,1 ,0.5 ,1 );
	a.og('ice', 26.639,2.356,-155.742,9.578,0,0,1.928 ,0.1 ,17.07 );
	a.og('ice', 26.697,2.356,-159.538,-39.452,0,0,1.928 ,0.1 ,17.07 );
	a.og('ice', 28.573,2.356,-168.503,20.945,0,0,1.928 ,0.1 ,17.07 ); // P51
	a.og('ice', 34.438,2.356,-183.828,45.999,0,0,1.928 ,0.1 ,17.07 ); // rotte
	a.og('ice', 39.93,2.356,-198.176,20.945,0,0,1.928 ,0.1 ,17.07 );
	a.og('ice', 45.585,2.356,-194.592,45.999,0,0,1.928 ,0.1 ,17.07 );
	a.og('fire', 26.829,2.339,-161.152,20.945,0,0,0.6 ,0.6 ,0.6 ); // ed
	a.og('fire', 36.54,2.339,-191.399,20.945,0,0,0.9 ,0.6 ,0.6 ); // ed
	a.og('fire', 39.111,2.339,-195.035,20.945,0,0,0.9 ,0.6 ,0.6 ); // ed
	a.og('fire', 40.651,2.339,-199.058,20.945,0,0,0.9 ,0.6 ,0.6 ); // ed
	a.og('fire', 40.974,2.339,-203.488,20.945,0,0,0.9 ,0.6 ,0.6 ); // ed
	a.og('ice', 46.406,2.356,-208.014,44.94,0,0,0.615 ,0.1 ,11.698 );
	a.og('ice', 49.514,2.356,-213.089,44.94,0,0,0.615 ,0.1 ,11.698 );
	a.og('ice', 47.519,2.356,-210.073,28.289,0,0,0.615 ,0.1 ,7.126 );
	a.og('ice', 53.039,2.356,-216.621,44.94,0,0,2.357 ,0.1 ,4.39 );
	a.og('ice', 53.823,2.356,-219.903,-36.616,0,0,2.357 ,0.1 ,1.634 );
	a.og('ice', 53.846,2.465,-223.112,0,3.991,0,2.357 ,0.1 ,4.39 );
	a.og('ice', 53.846,2.599,-227.483,0,0,0,2.357 ,0.1 ,4.39 ); // FINIS!!

	a.og_end(-53.846, 2.699, -227.483, 0);


	this.rotationAmount = 0;

},
	post: function() {
		cc.set_monkey("speed", 0.2);
		cc.set_monkey("steer", 0.03);
		cc.refresh();
	},
    section_id: 0,
    section_update: function() {
    },
    reset: function() {
        this.section_id = 0;
		cleanup.run(false);
		this.init();

        this.rotationAmount = 0;
    },
    physics_update: function() {},
    render_update: function() {
    	iv(player, scene);
    }
}

function iv(box, scene) {
	if (box.position.z < -100) {
		scene.getMeshByName("P32").position.y += 0.1 * 0.5;
		scene.getMeshByName("P33").rotation.z += 0.1 * 0.5;
		scene.getMeshByName("P34").rotation.z += -0.1 * 0.5;
		scene.getMeshByName("P35").rotation.z += 0.1 * 0.5;
	}
	if (box.position.z < -130) {
		if (box.position.z > -180) {
			scene.getMeshByName("P37").position.x += 0.1 * 0.5;
			scene.getMeshByName("P38").position.x += 0.1 * 0.5;
			scene.getMeshByName("P39").position.x += 0.1 * 0.5;
			scene.getMeshByName("P37").position.z -= 0.2 * 0.5;
			scene.getMeshByName("P38").position.z -= 0.2 * 0.5;
			scene.getMeshByName("P39").position.z -= 0.2 * 0.5;
			//
			scene.getMeshByName("P40").position.x -= 0.1 * 0.5;
			scene.getMeshByName("P41").position.x -= 0.1 * 0.5;
			scene.getMeshByName("P42").position.x -= 0.1 * 0.5;
			scene.getMeshByName("P40").position.z += 0.2 * 0.5;
			scene.getMeshByName("P41").position.z += 0.2 * 0.5;
			scene.getMeshByName("P42").position.z += 0.2 * 0.5;
			//
			scene.getMeshByName("P43").position.x -= 0.1 * 0.5;
			scene.getMeshByName("P44").position.x -= 0.1 * 0.5;
			scene.getMeshByName("P45").position.x -= 0.1 * 0.5;
			scene.getMeshByName("P43").position.z += 0.2 * 0.5;
			scene.getMeshByName("P44").position.z += 0.2 * 0.5;
			scene.getMeshByName("P45").position.z += 0.2 * 0.5;
			//
			scene.getMeshByName("P46").position.x -= 0.1 * 0.5;
			scene.getMeshByName("P47").position.x -= 0.1 * 0.5;
			scene.getMeshByName("P48").position.x -= 0.1 * 0.5;
			scene.getMeshByName("P46").position.z += 0.2 * 0.5;
			scene.getMeshByName("P47").position.z += 0.2 * 0.5;
			scene.getMeshByName("P48").position.z += 0.2 * 0.5;
		}
	}
	if (box.position.z < -167) {
		if (map.rotationAmount < 18) {
			scene.getMeshByName("P52").rotation.y -= 0.05 * 0.5;
			map.rotationAmount += 1;
		}
	}
}





